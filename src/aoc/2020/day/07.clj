(ns aoc.2020.day.07
  (:require [aoc.2020.advent :refer [day]]
            [clojure.string :as s]))

(def input "muted coral bags contain 1 bright magenta bag, 1 dim aqua bag.\nmuted orange bags contain 2 bright red bags.\ndim olive bags contain 2 dull silver bags, 4 posh blue bags.\ndim white bags contain 4 shiny indigo bags, 4 posh tan bags, 3 faded blue bags.\ndotted salmon bags contain 5 bright black bags, 3 bright purple bags, 5 bright olive bags.\nfaded purple bags contain 4 pale beige bags, 2 striped violet bags, 3 muted olive bags, 4 vibrant chartreuse bags.\ndark maroon bags contain 1 muted chartreuse bag, 1 muted violet bag, 2 bright lime bags.\nbright tomato bags contain 4 dark chartreuse bags, 2 striped blue bags, 2 drab magenta bags, 2 faded gray bags.\nlight orange bags contain 2 bright tomato bags, 5 muted olive bags, 1 mirrored green bag, 3 drab bronze bags.\nposh cyan bags contain 5 pale blue bags, 5 mirrored bronze bags, 4 dim magenta bags.\npale lime bags contain 4 light violet bags, 4 dotted black bags, 3 pale chartreuse bags.\nstriped lavender bags contain 4 shiny yellow bags, 1 mirrored green bag, 1 light blue bag.\ndull orange bags contain 1 shiny white bag, 3 clear crimson bags, 5 posh tan bags.\nposh lavender bags contain 5 vibrant orange bags, 3 dim aqua bags.\nlight beige bags contain 5 dim silver bags, 2 bright teal bags, 3 dotted tomato bags.\ndrab lime bags contain 5 faded lavender bags, 3 muted violet bags, 1 muted coral bag.\nfaded lavender bags contain 5 wavy blue bags, 2 plaid aqua bags.\ndull bronze bags contain 2 dark lavender bags, 1 dotted silver bag.\nplaid lavender bags contain 1 drab red bag, 4 wavy lime bags, 2 shiny olive bags.\nvibrant plum bags contain 4 clear indigo bags, 3 light bronze bags, 1 striped coral bag.\ndull cyan bags contain 4 striped cyan bags, 5 bright magenta bags, 2 pale brown bags.\nclear gold bags contain 4 faded black bags, 1 shiny chartreuse bag, 1 mirrored green bag.\ndotted olive bags contain 5 striped cyan bags, 2 dark chartreuse bags, 1 bright aqua bag, 1 pale blue bag.\nlight cyan bags contain 1 mirrored green bag.\nfaded tan bags contain 2 dim teal bags, 4 wavy green bags.\ndull olive bags contain 1 striped teal bag, 2 drab green bags, 2 light red bags.\nplaid red bags contain 2 muted cyan bags.\nfaded coral bags contain 1 striped maroon bag.\nlight aqua bags contain 2 muted plum bags, 5 mirrored bronze bags, 4 striped coral bags, 1 posh violet bag.\nbright aqua bags contain 2 pale coral bags, 4 mirrored bronze bags, 1 light gold bag, 2 plaid lime bags.\nmuted yellow bags contain 1 wavy blue bag, 5 drab violet bags, 3 wavy black bags, 2 bright teal bags.\nvibrant yellow bags contain 4 dull silver bags, 4 dark tan bags, 2 drab magenta bags.\nclear purple bags contain 1 posh bronze bag, 5 vibrant black bags, 3 bright bronze bags.\nfaded tomato bags contain 2 shiny turquoise bags, 5 vibrant yellow bags.\nmuted gold bags contain 1 vibrant purple bag, 5 clear aqua bags, 1 mirrored white bag.\ndrab magenta bags contain no other bags.\nposh brown bags contain 5 muted plum bags, 5 mirrored aqua bags, 3 wavy chartreuse bags, 1 dull lavender bag.\nbright red bags contain 3 drab violet bags, 3 clear blue bags.\nstriped red bags contain 4 vibrant orange bags, 2 vibrant turquoise bags.\ndotted green bags contain 1 pale green bag, 2 posh teal bags, 1 muted blue bag, 2 clear tomato bags.\npale fuchsia bags contain 3 dim blue bags.\nlight plum bags contain 4 clear green bags, 3 clear crimson bags, 1 vibrant aqua bag, 5 faded gray bags.\ndim violet bags contain 3 faded bronze bags, 5 dark turquoise bags.\nwavy indigo bags contain 2 pale green bags, 2 clear tomato bags, 2 dotted black bags.\ndark salmon bags contain 4 dotted silver bags.\nplaid bronze bags contain 2 shiny magenta bags.\nmirrored aqua bags contain 1 wavy green bag, 1 striped bronze bag, 4 light blue bags.\nmirrored gray bags contain 2 clear beige bags.\nwavy olive bags contain 3 dim brown bags, 5 clear green bags, 4 pale white bags.\nvibrant magenta bags contain 3 striped cyan bags, 3 mirrored purple bags.\ndotted teal bags contain 4 pale coral bags.\nposh orange bags contain 1 wavy chartreuse bag, 2 mirrored orange bags, 5 dark white bags, 1 vibrant salmon bag.\ndotted brown bags contain 5 drab silver bags, 5 bright tomato bags, 3 mirrored coral bags, 2 striped bronze bags.\nposh purple bags contain 5 striped purple bags, 1 wavy beige bag, 3 clear beige bags.\ndark bronze bags contain 5 posh white bags, 5 muted coral bags, 4 light blue bags.\nplaid violet bags contain 5 dark fuchsia bags.\ndrab gray bags contain 5 plaid bronze bags, 4 dark salmon bags, 5 mirrored blue bags.\nmuted tan bags contain 1 striped olive bag, 5 vibrant magenta bags, 5 mirrored green bags.\nwavy magenta bags contain 2 striped beige bags, 4 vibrant blue bags.\ndull violet bags contain no other bags.\ndrab blue bags contain 1 drab red bag, 4 dark gray bags.\nshiny crimson bags contain 1 shiny magenta bag, 5 shiny silver bags, 4 striped salmon bags, 5 light magenta bags.\nmuted teal bags contain 2 shiny teal bags, 5 dim fuchsia bags, 2 dim red bags.\ndotted gold bags contain 2 clear red bags, 1 wavy beige bag.\ndotted white bags contain 4 plaid chartreuse bags.\nmuted lavender bags contain 1 striped silver bag.\nvibrant teal bags contain 1 faded blue bag.\nstriped tan bags contain 3 muted salmon bags, 4 striped purple bags, 3 striped silver bags.\nlight blue bags contain 2 drab violet bags.\ndim salmon bags contain 1 pale chartreuse bag.\ndark lavender bags contain 2 dull brown bags, 5 pale teal bags, 2 muted lime bags, 4 pale beige bags.\nwavy beige bags contain 4 posh tan bags, 3 muted brown bags, 1 pale magenta bag, 5 muted magenta bags.\ndrab olive bags contain 1 striped indigo bag, 2 dull beige bags, 5 bright magenta bags.\npale cyan bags contain 2 bright olive bags.\ndark blue bags contain 1 posh indigo bag, 2 bright lime bags.\ndark chartreuse bags contain 3 muted brown bags, 3 light violet bags, 1 mirrored green bag.\ndim bronze bags contain 1 muted plum bag, 5 pale red bags.\ndotted fuchsia bags contain 3 drab violet bags.\nposh fuchsia bags contain 1 mirrored maroon bag.\nbright coral bags contain 2 vibrant gray bags, 2 drab aqua bags.\ndark orange bags contain 2 bright salmon bags, 1 plaid cyan bag, 3 plaid beige bags.\ndotted turquoise bags contain 4 wavy green bags, 1 plaid lavender bag, 1 dotted olive bag, 1 dark silver bag.\nplaid salmon bags contain 3 faded plum bags, 4 dark teal bags, 2 wavy green bags.\nclear cyan bags contain 3 dull tan bags, 2 shiny olive bags, 5 shiny brown bags.\nposh tan bags contain 5 dim lime bags, 1 shiny indigo bag, 2 dark chartreuse bags.\nmuted violet bags contain 1 wavy blue bag, 1 dark silver bag.\ndull indigo bags contain 3 posh plum bags, 5 shiny coral bags, 5 dull crimson bags.\nmirrored violet bags contain 2 posh plum bags, 5 dark indigo bags.\npale tomato bags contain 1 bright tomato bag, 3 striped salmon bags, 1 posh silver bag.\nshiny tomato bags contain 3 shiny coral bags, 5 striped orange bags, 1 posh bronze bag, 1 wavy silver bag.\ndull silver bags contain 3 light violet bags, 2 dim white bags, 2 dull beige bags, 3 pale maroon bags.\ndark gray bags contain 5 drab green bags, 5 mirrored green bags, 4 faded gray bags, 3 drab white bags.\nwavy orange bags contain 1 light maroon bag, 3 shiny beige bags, 5 drab silver bags.\npale lavender bags contain 4 shiny white bags, 4 bright indigo bags, 5 shiny teal bags, 3 clear crimson bags.\npale chartreuse bags contain 3 dark lavender bags.\nposh green bags contain 1 plaid plum bag, 3 drab maroon bags.\nclear lavender bags contain 1 vibrant purple bag, 4 pale orange bags.\ndim red bags contain 1 posh coral bag, 5 pale yellow bags, 5 plaid aqua bags, 3 striped bronze bags.\nlight violet bags contain no other bags.\ndull aqua bags contain 3 posh bronze bags, 2 muted plum bags.\nfaded beige bags contain 5 vibrant orange bags, 5 clear magenta bags.\nvibrant black bags contain 5 wavy orange bags.\nfaded silver bags contain 1 wavy olive bag.\ndark brown bags contain 3 light indigo bags, 1 muted salmon bag.\nmirrored green bags contain no other bags.\nplaid tomato bags contain 1 faded gray bag, 3 striped teal bags, 2 dotted beige bags, 2 dark coral bags.\nfaded salmon bags contain 1 vibrant purple bag, 1 dark cyan bag, 3 muted maroon bags.\nfaded white bags contain 1 mirrored tan bag, 2 pale fuchsia bags, 3 wavy gray bags, 3 plaid maroon bags.\nposh crimson bags contain 2 dull tan bags, 4 striped silver bags, 1 clear fuchsia bag.\nstriped silver bags contain 5 dull tan bags, 3 striped blue bags, 1 dark silver bag, 1 clear green bag.\ndim green bags contain 1 striped coral bag, 3 plaid gray bags, 4 clear green bags, 3 drab indigo bags.\nshiny gold bags contain 2 dark chartreuse bags, 2 bright silver bags, 1 striped bronze bag, 2 pale maroon bags.\nwavy coral bags contain 1 clear magenta bag.\nbright white bags contain 4 dim teal bags, 4 plaid violet bags, 5 dotted chartreuse bags.\ndull lime bags contain 5 vibrant salmon bags, 1 wavy fuchsia bag.\ndark red bags contain 2 mirrored gray bags, 5 drab tomato bags, 1 faded purple bag.\nmirrored cyan bags contain 5 bright cyan bags.\ndim blue bags contain 3 dull beige bags, 3 shiny white bags, 4 posh purple bags.\npale teal bags contain 3 striped tomato bags, 1 plaid plum bag, 5 mirrored green bags, 1 striped blue bag.\nposh silver bags contain 1 light violet bag, 3 dull blue bags.\nfaded black bags contain 2 bright tomato bags, 1 striped teal bag, 1 dim maroon bag.\nposh plum bags contain 5 faded gray bags.\nstriped beige bags contain 4 dotted fuchsia bags, 1 pale teal bag, 5 shiny cyan bags, 5 striped indigo bags.\nstriped indigo bags contain 4 muted olive bags, 1 dotted silver bag, 3 clear fuchsia bags, 3 dull orange bags.\ndull black bags contain 4 dark gold bags, 4 dark tan bags, 2 pale orange bags, 2 light gold bags.\ndark yellow bags contain 3 posh teal bags.\nvibrant gold bags contain 3 dull cyan bags, 1 mirrored maroon bag.\ndull gray bags contain 5 plaid plum bags, 4 mirrored aqua bags.\nmuted chartreuse bags contain 4 dull blue bags, 1 dull tan bag, 2 light green bags, 4 mirrored green bags.\ndim maroon bags contain 1 striped teal bag.\nbright orange bags contain 3 muted maroon bags, 5 muted tomato bags, 4 striped maroon bags, 1 faded gray bag.\nfaded orange bags contain 3 posh lime bags, 1 clear purple bag, 4 dotted magenta bags.\ndotted red bags contain 4 plaid tan bags, 1 dull tan bag, 2 posh beige bags, 5 bright turquoise bags.\ndotted orange bags contain 4 bright black bags.\nwavy plum bags contain 3 dull plum bags, 3 dotted cyan bags.\nclear turquoise bags contain 2 striped blue bags, 4 wavy plum bags, 2 dark olive bags, 2 striped maroon bags.\nwavy chartreuse bags contain 3 shiny yellow bags.\nmuted turquoise bags contain 2 plaid indigo bags.\ndotted bronze bags contain 2 pale red bags, 3 dull lavender bags, 4 striped crimson bags.\nclear black bags contain 3 striped plum bags, 3 plaid violet bags, 3 shiny chartreuse bags, 4 bright tomato bags.\nshiny brown bags contain 5 posh lime bags, 1 posh bronze bag, 4 wavy brown bags.\nposh bronze bags contain 1 mirrored gray bag, 2 bright plum bags, 5 dark gold bags.\ndark crimson bags contain 4 wavy orange bags, 4 wavy green bags, 1 muted brown bag, 2 dotted purple bags.\nfaded red bags contain 2 plaid violet bags, 5 dull orange bags, 1 mirrored tomato bag, 3 dim aqua bags.\ndrab purple bags contain 1 posh violet bag, 1 dotted cyan bag, 3 muted magenta bags, 2 wavy black bags.\ndotted beige bags contain 4 shiny green bags, 5 striped maroon bags.\ndim magenta bags contain 1 dull violet bag, 3 striped tomato bags.\nstriped white bags contain 4 dim maroon bags.\nvibrant tan bags contain 1 bright lime bag, 3 faded black bags, 3 bright olive bags.\nbright olive bags contain 5 drab orange bags, 2 drab black bags, 4 muted salmon bags.\ndark white bags contain 2 mirrored beige bags, 1 bright teal bag, 2 posh beige bags.\npale gold bags contain 5 dark orange bags.\nvibrant indigo bags contain 1 muted purple bag.\nfaded turquoise bags contain 5 pale indigo bags.\nfaded bronze bags contain 1 clear magenta bag, 4 faded gold bags.\nshiny gray bags contain 3 striped crimson bags, 2 dim brown bags, 3 drab red bags.\nmirrored magenta bags contain 3 wavy maroon bags, 2 pale beige bags.\nmuted lime bags contain 4 clear beige bags, 5 vibrant chartreuse bags, 1 dark turquoise bag, 5 dim crimson bags.\nvibrant crimson bags contain 1 dotted fuchsia bag, 1 pale tomato bag, 4 dark turquoise bags.\nvibrant cyan bags contain 4 mirrored brown bags, 3 wavy green bags.\npale orange bags contain 1 pale gray bag, 2 wavy green bags, 5 plaid plum bags.\nvibrant maroon bags contain 3 bright red bags.\nlight bronze bags contain 1 dull blue bag, 2 posh crimson bags, 5 drab magenta bags.\ndim beige bags contain 4 shiny yellow bags, 4 muted lavender bags.\npale black bags contain 5 mirrored fuchsia bags, 4 striped salmon bags, 2 dark turquoise bags, 4 dotted orange bags.\ndark turquoise bags contain 2 striped purple bags, 5 bright teal bags.\ndrab crimson bags contain 1 faded turquoise bag, 4 vibrant crimson bags.\npale maroon bags contain 3 dull violet bags.\nbright salmon bags contain 5 pale lime bags, 4 bright cyan bags.\ndull beige bags contain 3 striped tomato bags, 3 dotted black bags.\nclear fuchsia bags contain 4 shiny white bags, 1 mirrored fuchsia bag, 4 drab violet bags, 1 pale magenta bag.\nwavy gold bags contain 1 vibrant black bag, 2 dotted indigo bags, 5 faded silver bags, 1 muted cyan bag.\nplaid maroon bags contain 3 bright silver bags, 5 mirrored coral bags.\ndim cyan bags contain 3 muted white bags, 2 wavy maroon bags.\nwavy purple bags contain 4 bright teal bags, 4 dull turquoise bags, 2 vibrant aqua bags.\nmuted cyan bags contain 3 muted olive bags, 3 dim brown bags, 4 striped indigo bags.\nstriped olive bags contain 2 clear blue bags, 2 plaid indigo bags, 3 faded blue bags, 3 bright tomato bags.\nplaid orange bags contain 2 bright indigo bags, 2 vibrant blue bags, 5 light gray bags, 3 faded tomato bags.\nstriped plum bags contain 5 posh gold bags, 5 bright bronze bags, 2 clear gold bags, 2 dark lime bags.\ndim crimson bags contain 4 posh tan bags.\ndrab aqua bags contain 3 mirrored lime bags, 4 pale salmon bags, 2 wavy coral bags, 4 light brown bags.\nbright silver bags contain 4 muted salmon bags, 2 striped salmon bags, 5 shiny turquoise bags.\nshiny beige bags contain 2 light plum bags, 4 dim maroon bags, 3 pale brown bags, 1 pale maroon bag.\nshiny tan bags contain 4 posh chartreuse bags, 3 dim tan bags, 2 pale green bags, 5 light tomato bags.\nwavy silver bags contain 3 drab magenta bags.\nlight brown bags contain 5 dim fuchsia bags, 3 drab brown bags, 4 posh bronze bags, 4 bright cyan bags.\nstriped green bags contain 5 bright bronze bags, 1 striped gray bag, 4 wavy fuchsia bags, 2 striped indigo bags.\nfaded brown bags contain 3 dim brown bags.\nclear maroon bags contain 2 mirrored magenta bags, 3 light cyan bags.\ndim black bags contain 3 dull turquoise bags.\nmuted bronze bags contain 3 bright green bags.\ndrab green bags contain 4 posh gold bags.\nmuted magenta bags contain 5 muted brown bags, 2 dark chartreuse bags, 5 pale magenta bags.\nlight chartreuse bags contain 5 dim lime bags, 1 faded blue bag, 5 striped salmon bags.\ndull teal bags contain 3 shiny teal bags.\nfaded blue bags contain 5 shiny indigo bags, 5 drab magenta bags, 1 dim lime bag, 5 striped teal bags.\npale red bags contain 1 dull brown bag, 1 bright tomato bag.\ndim indigo bags contain 2 vibrant white bags.\nlight gold bags contain 5 shiny gold bags.\nclear green bags contain 2 muted brown bags, 4 mirrored orange bags.\nposh red bags contain 1 striped salmon bag, 4 posh silver bags, 1 pale blue bag.\ndull coral bags contain 2 pale bronze bags, 3 shiny lime bags, 5 muted chartreuse bags.\ndotted plum bags contain 4 plaid fuchsia bags, 1 mirrored coral bag, 4 clear beige bags, 4 bright gray bags.\nshiny black bags contain 5 dotted indigo bags.\ndrab white bags contain 5 wavy lime bags, 1 posh bronze bag, 3 striped crimson bags.\nlight fuchsia bags contain 3 striped maroon bags, 3 muted coral bags, 3 light green bags.\ndotted tan bags contain 1 wavy aqua bag, 3 dull turquoise bags.\ndark tomato bags contain 4 dull violet bags, 4 shiny gold bags, 2 clear fuchsia bags, 5 striped teal bags.\nposh yellow bags contain 1 dotted brown bag, 5 mirrored aqua bags.\ndark silver bags contain 3 striped blue bags, 3 faded gray bags.\nclear chartreuse bags contain 2 faded green bags, 4 vibrant lavender bags, 5 faded lime bags, 5 plaid lavender bags.\ndotted gray bags contain 3 drab orange bags.\nvibrant beige bags contain 2 bright olive bags, 2 plaid gold bags, 3 drab lime bags.\nlight lime bags contain 1 bright teal bag, 1 shiny cyan bag.\ndark aqua bags contain 4 striped silver bags, 1 vibrant bronze bag, 2 plaid orange bags.\nshiny plum bags contain 3 bright tomato bags, 2 clear crimson bags, 2 dull violet bags, 2 posh bronze bags.\nposh gray bags contain 4 pale maroon bags, 4 plaid gold bags, 3 bright red bags.\ndark olive bags contain 4 pale aqua bags, 4 bright brown bags, 2 dotted gray bags.\ndim tan bags contain 5 mirrored orange bags, 5 pale magenta bags, 3 striped teal bags.\ndrab chartreuse bags contain 3 posh olive bags.\nclear lime bags contain 1 vibrant gold bag, 1 faded beige bag, 2 dark lime bags, 1 faded gold bag.\npale plum bags contain 5 dim lavender bags, 3 dim turquoise bags, 5 muted aqua bags, 4 bright maroon bags.\nmirrored lime bags contain 4 dim brown bags, 2 muted tomato bags.\nwavy violet bags contain 3 mirrored chartreuse bags, 5 wavy gold bags, 1 faded gray bag, 2 dim maroon bags.\nposh coral bags contain 5 bright turquoise bags, 2 dark fuchsia bags, 4 light crimson bags.\nshiny olive bags contain 2 shiny coral bags, 2 posh bronze bags.\nfaded yellow bags contain 5 striped black bags, 1 dotted black bag.\ndotted chartreuse bags contain 3 shiny maroon bags, 2 pale magenta bags, 5 wavy beige bags, 5 dim silver bags.\ndotted lavender bags contain 5 muted silver bags, 2 striped purple bags.\nposh olive bags contain 5 dotted yellow bags, 1 light salmon bag.\nshiny magenta bags contain 1 striped yellow bag, 1 dotted yellow bag, 1 bright teal bag, 3 striped tan bags.\nclear red bags contain 5 shiny teal bags.\nposh black bags contain 1 shiny lime bag, 1 shiny salmon bag.\ndotted yellow bags contain 3 dull gold bags, 3 dotted fuchsia bags, 1 shiny teal bag, 2 bright black bags.\ndrab salmon bags contain 5 plaid white bags, 4 dull lavender bags, 4 striped red bags, 1 posh bronze bag.\nshiny white bags contain 4 striped tomato bags, 4 posh tan bags.\nclear olive bags contain 2 bright plum bags, 1 clear green bag.\nlight tomato bags contain 5 dark purple bags.\nwavy crimson bags contain 2 plaid plum bags, 1 vibrant tomato bag, 4 mirrored plum bags.\nmuted indigo bags contain 1 posh coral bag, 1 posh lavender bag, 1 muted coral bag, 4 faded lime bags.\nmirrored coral bags contain 3 vibrant chartreuse bags, 5 muted magenta bags, 2 shiny salmon bags.\nbright violet bags contain 2 dotted aqua bags, 3 dark yellow bags, 1 clear purple bag.\nmirrored white bags contain 1 wavy chartreuse bag, 3 clear aqua bags, 3 bright tan bags.\nmirrored orange bags contain no other bags.\ndrab violet bags contain 1 drab magenta bag, 4 striped purple bags.\npale white bags contain 1 muted maroon bag, 1 clear crimson bag, 3 dotted fuchsia bags, 3 clear bronze bags.\ndull green bags contain 3 mirrored fuchsia bags, 4 mirrored purple bags, 2 dotted green bags.\npale tan bags contain 2 dark fuchsia bags, 5 shiny white bags, 4 bright red bags, 5 posh plum bags.\ndull tan bags contain 5 clear blue bags, 1 shiny turquoise bag.\nshiny turquoise bags contain 5 striped teal bags, 5 clear crimson bags, 4 dim lime bags, 2 faded gray bags.\nshiny lime bags contain 1 plaid indigo bag, 1 dim lime bag, 5 dotted beige bags, 2 dotted indigo bags.\nbright fuchsia bags contain 4 plaid chartreuse bags, 1 drab red bag.\nwavy lavender bags contain 1 muted olive bag, 3 shiny tan bags, 5 posh tan bags, 4 bright green bags.\nshiny violet bags contain 2 dull lime bags, 1 dotted crimson bag, 5 dark lime bags, 4 shiny salmon bags.\ndotted maroon bags contain 1 vibrant crimson bag.\nmirrored bronze bags contain 5 posh silver bags, 3 mirrored lime bags.\nlight green bags contain 1 pale indigo bag, 4 vibrant chartreuse bags, 1 dull beige bag, 5 pale aqua bags.\nclear indigo bags contain 5 dull turquoise bags.\nfaded indigo bags contain 3 muted tomato bags, 2 dotted fuchsia bags, 4 striped silver bags.\nshiny green bags contain 3 striped salmon bags, 4 posh gold bags.\nmuted crimson bags contain 4 dark indigo bags.\nposh gold bags contain 4 mirrored fuchsia bags, 3 muted brown bags, 5 dim lime bags.\npale brown bags contain 3 striped teal bags, 2 bright magenta bags.\ndark indigo bags contain 1 muted tomato bag.\nlight turquoise bags contain 2 vibrant turquoise bags, 2 bright silver bags.\nshiny salmon bags contain 4 pale gray bags.\nfaded fuchsia bags contain 4 light chartreuse bags, 4 posh lime bags.\nmirrored teal bags contain 4 dull orange bags, 1 muted turquoise bag, 2 vibrant aqua bags, 3 faded blue bags.\nmuted tomato bags contain 4 drab green bags, 3 pale coral bags, 5 bright green bags.\nbright plum bags contain 4 drab magenta bags, 5 light violet bags.\nstriped brown bags contain 3 vibrant turquoise bags, 2 plaid crimson bags, 2 wavy gray bags.\nmuted white bags contain 5 posh white bags.\nmuted beige bags contain 3 shiny cyan bags, 4 dim brown bags, 3 clear blue bags.\ndim coral bags contain 4 wavy fuchsia bags.\nlight indigo bags contain 2 faded bronze bags, 3 dim magenta bags.\ndark black bags contain 5 faded fuchsia bags, 5 mirrored olive bags, 3 dotted fuchsia bags.\nvibrant green bags contain 5 bright purple bags, 5 muted chartreuse bags.\nplaid fuchsia bags contain 5 bright aqua bags, 2 shiny indigo bags.\nlight red bags contain 1 vibrant aqua bag.\nlight gray bags contain 2 bright maroon bags, 3 dim turquoise bags, 2 faded gold bags.\nfaded gold bags contain 3 dull tan bags, 2 dotted black bags.\nstriped lime bags contain 5 muted fuchsia bags, 3 bright tomato bags, 3 drab teal bags.\ndim purple bags contain 4 drab lavender bags.\nplaid aqua bags contain 4 shiny indigo bags, 2 pale teal bags, 3 clear crimson bags, 2 striped purple bags.\nwavy fuchsia bags contain 4 shiny turquoise bags, 3 muted salmon bags.\nbright lavender bags contain 4 light gold bags, 1 bright magenta bag.\nstriped tomato bags contain no other bags.\nbright indigo bags contain 4 striped yellow bags, 2 clear crimson bags.\ndull tomato bags contain 5 mirrored orange bags, 3 vibrant yellow bags.\nstriped violet bags contain 1 clear beige bag, 4 drab violet bags.\nvibrant turquoise bags contain 4 light violet bags, 2 plaid gold bags.\ndim aqua bags contain 1 bright teal bag, 1 wavy silver bag.\ndim lavender bags contain 2 dull aqua bags, 1 plaid maroon bag, 1 light gray bag, 4 wavy maroon bags.\nvibrant violet bags contain 3 posh gold bags, 3 shiny plum bags, 4 muted coral bags, 4 posh indigo bags.\nshiny chartreuse bags contain 5 light violet bags, 5 plaid aqua bags.\ndull brown bags contain 1 dull violet bag, 1 striped salmon bag, 1 wavy tan bag.\nmuted silver bags contain 4 dark red bags, 2 muted violet bags.\nstriped blue bags contain no other bags.\nplaid silver bags contain 5 dotted red bags, 2 faded teal bags, 2 faded olive bags.\nfaded lime bags contain 3 vibrant chartreuse bags.\nvibrant silver bags contain 3 pale violet bags, 3 dark purple bags.\nclear tomato bags contain 3 clear salmon bags, 2 light blue bags, 2 striped yellow bags.\npale indigo bags contain 3 clear green bags.\ndim turquoise bags contain 3 pale teal bags, 4 shiny white bags.\nbright tan bags contain 3 dotted beige bags.\nlight tan bags contain 3 dark teal bags, 4 muted brown bags.\nplaid white bags contain 3 clear white bags, 1 dotted gold bag, 1 striped beige bag, 3 mirrored lavender bags.\nfaded aqua bags contain 1 bright plum bag.\npale crimson bags contain 2 mirrored magenta bags, 2 bright tan bags, 4 clear maroon bags.\nmirrored tomato bags contain 5 bright bronze bags.\nbright bronze bags contain 3 light red bags.\nplaid green bags contain 5 striped green bags, 3 vibrant orange bags.\ndrab teal bags contain 4 plaid orange bags, 4 dotted teal bags, 1 vibrant chartreuse bag.\nposh chartreuse bags contain 3 shiny teal bags, 5 dark tan bags, 1 dull olive bag.\ndim lime bags contain 3 pale magenta bags, 5 striped tomato bags, 2 drab magenta bags, 4 striped blue bags.\nvibrant fuchsia bags contain 5 plaid tomato bags, 2 dark coral bags, 5 mirrored lime bags, 3 plaid violet bags.\nmirrored turquoise bags contain 5 wavy gray bags, 3 faded lavender bags, 5 muted fuchsia bags, 5 clear red bags.\nplaid magenta bags contain 1 clear bronze bag, 3 muted cyan bags, 3 clear fuchsia bags.\nmuted blue bags contain 4 dotted indigo bags, 5 dim magenta bags.\ndotted lime bags contain 5 vibrant aqua bags, 1 clear olive bag, 1 clear green bag.\ndim teal bags contain 5 mirrored teal bags, 4 dotted teal bags, 1 mirrored tomato bag, 2 dull violet bags.\nplaid blue bags contain 5 posh yellow bags, 2 mirrored crimson bags, 4 drab lavender bags, 5 plaid fuchsia bags.\ndrab turquoise bags contain 1 dotted plum bag, 4 dim gold bags, 3 mirrored white bags, 2 posh coral bags.\nstriped maroon bags contain 2 dim coral bags, 4 light cyan bags.\nvibrant blue bags contain 2 dotted beige bags, 4 shiny green bags, 3 posh bronze bags, 3 posh olive bags.\nposh teal bags contain 5 wavy beige bags, 1 striped black bag, 3 dotted teal bags.\nlight yellow bags contain 1 wavy olive bag, 4 shiny green bags, 2 clear teal bags.\ndim silver bags contain 1 dark lime bag, 1 bright red bag.\ndrab gold bags contain 4 mirrored purple bags, 3 wavy maroon bags.\nstriped gray bags contain 3 wavy silver bags.\nbright maroon bags contain 5 dull olive bags, 4 shiny gold bags.\ndotted silver bags contain 4 dim tan bags, 3 posh tan bags, 1 clear crimson bag.\ndark green bags contain 4 dim teal bags, 5 dull tan bags, 1 pale blue bag, 5 clear aqua bags.\nclear crimson bags contain 1 posh gold bag, 1 dull violet bag, 4 mirrored green bags.\nbright green bags contain 5 clear bronze bags, 2 wavy beige bags.\ndrab yellow bags contain 2 dim lavender bags, 4 striped indigo bags, 4 wavy green bags.\nbright brown bags contain 5 drab maroon bags, 2 wavy beige bags.\ndark purple bags contain 5 dark green bags.\nstriped magenta bags contain 2 vibrant blue bags, 3 muted yellow bags, 3 muted violet bags.\ndim orange bags contain 4 dim fuchsia bags.\ndrab brown bags contain 3 plaid lavender bags, 3 mirrored plum bags, 1 faded black bag.\nlight magenta bags contain 2 clear beige bags, 3 shiny plum bags, 3 drab violet bags.\nfaded gray bags contain 5 mirrored green bags, 3 dull violet bags.\ndull crimson bags contain 1 light gray bag, 2 dull gray bags.\ndotted blue bags contain 2 faded lavender bags, 2 mirrored fuchsia bags, 2 dark blue bags.\nbright black bags contain 4 dark chartreuse bags, 5 dim turquoise bags, 5 clear green bags, 2 striped teal bags.\ndim plum bags contain 4 posh silver bags, 3 clear red bags.\nplaid gray bags contain 2 clear silver bags, 1 posh lime bag, 3 striped gray bags, 3 dotted maroon bags.\nmuted plum bags contain 4 plaid aqua bags, 1 wavy gray bag, 2 light crimson bags, 1 dull red bag.\ndark magenta bags contain 4 drab white bags, 5 dark lavender bags, 5 dim teal bags, 5 bright tan bags.\nclear brown bags contain 2 mirrored teal bags, 1 striped silver bag, 3 mirrored purple bags, 3 faded gray bags.\nmuted brown bags contain 1 striped teal bag, 3 pale magenta bags, 3 striped tomato bags.\nbright gray bags contain 1 dark fuchsia bag.\nwavy teal bags contain 5 faded gold bags, 5 bright plum bags.\nwavy bronze bags contain 4 posh turquoise bags, 5 muted red bags, 3 plaid crimson bags.\nshiny lavender bags contain 4 bright tan bags, 5 drab teal bags, 1 shiny tan bag.\npale silver bags contain 2 mirrored beige bags, 2 drab crimson bags, 4 clear coral bags, 3 plaid brown bags.\ndrab silver bags contain 1 dark fuchsia bag, 3 drab magenta bags, 4 pale violet bags, 5 dull tan bags.\nbright chartreuse bags contain 1 bright green bag.\nlight salmon bags contain 2 dim brown bags, 4 dark gold bags, 2 dull silver bags, 4 bright bronze bags.\nclear silver bags contain 4 shiny gray bags, 3 drab green bags, 5 dim aqua bags, 2 drab olive bags.\nwavy tomato bags contain 3 wavy green bags.\ndotted magenta bags contain 4 posh purple bags.\nstriped fuchsia bags contain 4 vibrant maroon bags, 4 wavy tomato bags, 3 clear coral bags, 3 striped indigo bags.\nwavy green bags contain 1 plaid aqua bag.\nclear plum bags contain 2 wavy silver bags, 3 posh red bags, 2 dark gray bags, 4 dull brown bags.\nstriped aqua bags contain 5 dull gold bags, 5 mirrored green bags.\ndull maroon bags contain 5 posh crimson bags, 1 muted tomato bag, 5 shiny gold bags.\nmuted green bags contain 5 faded blue bags, 2 dark tan bags, 1 mirrored bronze bag, 2 dotted crimson bags.\nmirrored purple bags contain 3 clear green bags, 2 bright plum bags, 4 muted olive bags.\ndull purple bags contain 3 plaid tan bags, 5 bright turquoise bags.\npale coral bags contain 1 clear olive bag.\nwavy gray bags contain 4 light gold bags, 5 clear beige bags, 4 dim lime bags.\nwavy cyan bags contain 2 striped olive bags.\ndrab orange bags contain 1 mirrored purple bag, 2 muted cyan bags, 4 posh purple bags.\nwavy lime bags contain 2 striped indigo bags, 3 plaid plum bags, 3 drab violet bags, 5 muted magenta bags.\ndull blue bags contain 3 drab magenta bags, 1 shiny teal bag, 5 mirrored fuchsia bags, 2 posh plum bags.\ndark teal bags contain 4 shiny gray bags.\npale beige bags contain 4 faded blue bags, 2 dull red bags, 3 wavy beige bags, 2 dull tan bags.\npale purple bags contain 2 pale maroon bags.\nclear magenta bags contain 3 muted olive bags, 3 bright teal bags, 4 dull salmon bags, 2 mirrored coral bags.\ndark tan bags contain 2 plaid plum bags, 5 bright purple bags, 4 mirrored aqua bags.\npale turquoise bags contain 3 striped silver bags, 2 bright gray bags.\nshiny indigo bags contain 5 mirrored fuchsia bags.\nplaid plum bags contain no other bags.\nplaid yellow bags contain 5 bright beige bags, 2 dull tan bags, 3 dim crimson bags, 1 vibrant tomato bag.\npale gray bags contain 5 mirrored green bags, 3 plaid aqua bags, 5 pale violet bags.\ndotted crimson bags contain 5 striped lavender bags, 3 shiny orange bags.\nplaid teal bags contain 2 bright aqua bags, 1 posh olive bag, 4 shiny white bags, 3 dotted beige bags.\ndim brown bags contain 5 striped tomato bags, 5 wavy black bags, 3 pale magenta bags.\nvibrant gray bags contain 4 dark cyan bags, 5 drab purple bags, 2 mirrored crimson bags, 4 dark turquoise bags.\nlight olive bags contain 2 mirrored teal bags.\nposh aqua bags contain 5 muted cyan bags, 1 plaid aqua bag, 4 mirrored plum bags.\nwavy tan bags contain 5 clear fuchsia bags, 1 bright silver bag, 5 clear green bags, 2 bright teal bags.\nshiny cyan bags contain 3 clear green bags, 2 bright black bags, 3 muted magenta bags, 4 mirrored orange bags.\nmirrored fuchsia bags contain no other bags.\nplaid beige bags contain 4 wavy indigo bags, 2 bright green bags, 1 light magenta bag, 2 plaid tomato bags.\ndrab cyan bags contain 5 posh yellow bags, 5 dull white bags.\ndrab tan bags contain 5 wavy teal bags.\nmuted aqua bags contain 3 dim blue bags, 1 dim tan bag, 3 dim white bags.\nposh tomato bags contain 1 clear purple bag, 4 vibrant crimson bags.\npale aqua bags contain 5 wavy fuchsia bags, 2 striped bronze bags.\npale magenta bags contain no other bags.\npale violet bags contain 1 pale maroon bag.\nshiny teal bags contain 4 striped tomato bags, 1 bright plum bag, 1 dim crimson bag, 1 plaid aqua bag.\nvibrant aqua bags contain 4 mirrored green bags, 4 dim crimson bags, 4 faded blue bags.\nfaded violet bags contain 1 dark green bag, 4 mirrored maroon bags, 1 dark lavender bag, 4 bright black bags.\nmirrored tan bags contain 3 mirrored magenta bags.\nfaded cyan bags contain 5 dotted crimson bags, 1 vibrant yellow bag, 3 shiny bronze bags.\nposh violet bags contain 4 dotted beige bags.\nstriped salmon bags contain 3 posh purple bags, 4 clear green bags.\nmirrored indigo bags contain 2 posh plum bags.\ndim gold bags contain 2 posh gold bags, 5 faded gray bags.\nstriped bronze bags contain 4 mirrored orange bags.\nlight white bags contain 3 shiny plum bags, 5 striped indigo bags.\nmuted purple bags contain 2 dull orange bags, 4 drab maroon bags, 4 striped lavender bags, 4 dim teal bags.\nclear violet bags contain 5 plaid yellow bags, 3 dark lavender bags, 2 wavy salmon bags.\ndotted black bags contain 1 pale brown bag, 1 drab magenta bag, 5 plaid plum bags, 5 clear crimson bags.\nwavy black bags contain 5 dim lime bags, 4 drab magenta bags, 5 mirrored orange bags, 3 plaid plum bags.\nplaid purple bags contain 4 dull maroon bags.\ndotted cyan bags contain 4 pale indigo bags, 1 dark coral bag.\nbright magenta bags contain 3 clear fuchsia bags, 2 plaid plum bags, 1 clear blue bag, 1 dim white bag.\nposh blue bags contain 4 dark purple bags.\nvibrant tomato bags contain 5 muted tomato bags, 5 striped indigo bags, 3 clear crimson bags.\ndrab black bags contain 3 dotted orange bags, 1 pale tomato bag, 2 bright maroon bags.\nclear salmon bags contain 3 pale maroon bags.\nmirrored beige bags contain 5 dark lavender bags, 5 light violet bags, 3 striped tomato bags.\nmuted gray bags contain 4 muted gold bags, 4 clear indigo bags, 4 light maroon bags.\nposh indigo bags contain 4 faded aqua bags.\nwavy red bags contain 3 dim crimson bags, 3 clear red bags, 3 wavy beige bags, 1 vibrant purple bag.\nstriped purple bags contain 4 mirrored orange bags, 3 drab magenta bags, 1 bright plum bag, 3 striped teal bags.\ndull magenta bags contain 2 dim crimson bags, 2 wavy olive bags.\nwavy brown bags contain 3 faded tomato bags, 1 muted olive bag, 2 light tomato bags, 1 shiny orange bag.\nclear coral bags contain 2 shiny maroon bags.\ndotted indigo bags contain 1 posh silver bag.\npale green bags contain 1 striped crimson bag, 3 dim coral bags, 5 mirrored aqua bags, 4 light cyan bags.\nvibrant chartreuse bags contain 1 clear beige bag, 4 muted magenta bags, 2 mirrored orange bags, 5 pale teal bags.\nmuted salmon bags contain 1 muted brown bag, 5 dark chartreuse bags, 3 posh gold bags, 2 shiny indigo bags.\nmirrored gold bags contain 2 dotted bronze bags, 3 muted bronze bags, 4 clear orange bags.\nlight purple bags contain 2 light blue bags, 5 muted black bags, 4 posh indigo bags.\nclear aqua bags contain 2 muted chartreuse bags, 2 dotted black bags, 4 wavy black bags.\nfaded crimson bags contain 5 shiny salmon bags, 2 striped plum bags.\nbright cyan bags contain 2 wavy olive bags, 3 muted turquoise bags.\npale yellow bags contain 1 pale beige bag, 3 striped cyan bags.\nstriped crimson bags contain 5 shiny indigo bags, 4 dim brown bags, 5 muted salmon bags, 5 mirrored green bags.\nmirrored brown bags contain 1 pale tomato bag, 1 striped purple bag, 5 posh gold bags.\nbright lime bags contain 2 muted red bags, 1 pale lavender bag, 1 posh white bag.\nposh turquoise bags contain 3 pale white bags.\ndrab red bags contain 3 dark fuchsia bags.\nstriped gold bags contain 1 mirrored brown bag, 5 drab lavender bags, 4 dotted lavender bags.\ndull red bags contain 2 dim crimson bags.\nstriped cyan bags contain 3 striped salmon bags, 3 wavy beige bags, 2 dim tan bags.\nvibrant lime bags contain 1 pale lavender bag.\ndotted violet bags contain 4 plaid gold bags, 3 clear green bags.\npale olive bags contain 3 light orange bags, 4 wavy silver bags, 4 shiny indigo bags.\nplaid olive bags contain 4 dim purple bags, 5 wavy chartreuse bags, 3 posh plum bags, 4 light violet bags.\ndotted coral bags contain 1 striped olive bag, 1 wavy gray bag, 1 vibrant chartreuse bag.\ndrab lavender bags contain 1 mirrored crimson bag.\nmirrored crimson bags contain 3 dark gold bags.\nvibrant orange bags contain 1 light blue bag, 3 mirrored brown bags, 2 mirrored plum bags, 3 pale lavender bags.\ndull chartreuse bags contain 3 dotted bronze bags, 3 striped teal bags.\nwavy turquoise bags contain 4 muted fuchsia bags.\nshiny purple bags contain 5 drab salmon bags.\nplaid brown bags contain 2 bright green bags, 5 clear aqua bags, 2 plaid plum bags.\npale bronze bags contain 3 bright red bags, 3 pale black bags, 1 wavy lime bag, 4 light maroon bags.\nvibrant white bags contain 5 striped yellow bags, 4 dark tan bags.\nmirrored blue bags contain 1 plaid indigo bag, 5 muted chartreuse bags, 2 plaid lime bags, 2 drab green bags.\nwavy aqua bags contain 4 mirrored orange bags.\ndrab bronze bags contain 1 bright purple bag, 5 dim coral bags, 4 shiny green bags, 2 pale beige bags.\nmirrored chartreuse bags contain 2 mirrored tomato bags, 4 posh lime bags, 5 posh tan bags, 4 pale aqua bags.\nbright blue bags contain 3 dark violet bags.\nmirrored yellow bags contain 2 pale tomato bags, 4 vibrant gold bags, 1 faded teal bag, 2 bright purple bags.\nplaid black bags contain 2 plaid purple bags, 5 dotted bronze bags.\nshiny silver bags contain 1 dull lavender bag, 5 pale magenta bags, 2 drab white bags.\nmirrored salmon bags contain 1 muted lime bag, 4 shiny bronze bags.\nmuted maroon bags contain 3 muted lime bags, 1 muted turquoise bag.\nlight black bags contain 3 striped beige bags, 2 shiny olive bags, 2 drab olive bags.\nwavy blue bags contain 2 dull violet bags, 1 pale magenta bag, 3 bright black bags.\nlight silver bags contain 1 shiny bronze bag, 2 faded lavender bags.\nshiny coral bags contain 2 mirrored tomato bags, 2 faded fuchsia bags, 2 striped violet bags, 4 shiny orange bags.\nstriped coral bags contain 1 clear indigo bag, 3 muted bronze bags, 4 shiny turquoise bags.\nshiny bronze bags contain 4 light gold bags.\nbright crimson bags contain 4 mirrored blue bags, 3 dull aqua bags, 5 muted lavender bags, 1 dotted turquoise bag.\nstriped turquoise bags contain 3 striped indigo bags, 3 clear fuchsia bags, 4 bright black bags, 1 vibrant aqua bag.\nfaded green bags contain 3 posh olive bags, 4 bright violet bags, 5 dull yellow bags, 3 dull olive bags.\ndark coral bags contain 2 wavy green bags, 2 shiny cyan bags, 5 light red bags, 3 bright red bags.\nclear teal bags contain 3 plaid beige bags, 5 faded aqua bags, 2 dim yellow bags, 5 bright gray bags.\nplaid chartreuse bags contain 2 dark magenta bags, 5 wavy olive bags, 2 plaid plum bags.\nshiny aqua bags contain 1 wavy indigo bag, 1 dull bronze bag, 4 shiny bronze bags.\nwavy salmon bags contain 2 pale lime bags, 4 drab silver bags.\nstriped yellow bags contain 4 faded black bags.\nmirrored black bags contain 5 muted yellow bags.\nbright gold bags contain 2 mirrored crimson bags, 1 vibrant purple bag.\nvibrant purple bags contain 1 muted tomato bag, 5 shiny green bags, 1 dark turquoise bag.\ndull fuchsia bags contain 1 wavy gold bag, 2 plaid yellow bags.\nlight maroon bags contain 5 striped indigo bags, 3 muted red bags, 3 muted lime bags, 2 striped lavender bags.\nclear yellow bags contain 3 plaid beige bags.\nclear tan bags contain 2 vibrant red bags, 4 light chartreuse bags.\ndotted tomato bags contain 5 vibrant black bags, 5 dotted gray bags, 5 plaid red bags.\ndark plum bags contain 5 dotted orange bags, 2 mirrored blue bags, 1 light indigo bag.\nposh magenta bags contain 3 dim gold bags, 1 drab coral bag, 3 shiny tomato bags.\nposh salmon bags contain 4 posh tomato bags, 3 pale silver bags.\nvibrant bronze bags contain 4 posh orange bags.\ndim tomato bags contain 2 dull black bags, 1 striped aqua bag.\nposh white bags contain 3 shiny plum bags, 2 wavy olive bags.\nmirrored plum bags contain 5 dotted teal bags, 2 bright maroon bags.\nlight coral bags contain 3 dull brown bags, 4 pale red bags, 4 dull orange bags, 5 dim crimson bags.\nstriped teal bags contain 1 plaid plum bag, 4 striped tomato bags, 1 mirrored orange bag, 5 mirrored fuchsia bags.\nstriped orange bags contain 4 dark crimson bags, 5 drab green bags, 5 striped tan bags.\ndark gold bags contain 2 bright plum bags, 1 striped purple bag, 3 wavy beige bags.\ndrab fuchsia bags contain 5 wavy orange bags.\ndull salmon bags contain 2 dull olive bags, 4 bright silver bags, 1 muted tomato bag.\nshiny fuchsia bags contain 2 mirrored fuchsia bags, 1 bright black bag, 2 clear orange bags, 4 wavy gold bags.\nclear bronze bags contain 4 posh purple bags, 3 dim gold bags, 3 light chartreuse bags, 1 shiny cyan bag.\ndim gray bags contain 5 muted beige bags, 1 dim purple bag.\nfaded magenta bags contain 3 mirrored aqua bags, 3 vibrant maroon bags, 5 drab red bags, 1 light magenta bag.\nmuted fuchsia bags contain 1 dim indigo bag, 5 vibrant purple bags, 2 posh silver bags.\nposh beige bags contain 3 dark gold bags.\nbright yellow bags contain 2 mirrored blue bags.\nclear orange bags contain 4 vibrant purple bags, 2 clear fuchsia bags.\npale salmon bags contain 4 wavy black bags, 3 muted olive bags, 5 wavy teal bags, 3 dotted orange bags.\ndim chartreuse bags contain 1 mirrored bronze bag, 5 shiny lavender bags, 4 dark red bags.\nclear gray bags contain 4 bright indigo bags, 5 wavy coral bags, 4 drab tomato bags, 1 mirrored tomato bag.\ndrab maroon bags contain 2 dotted lime bags, 2 muted beige bags, 2 clear aqua bags, 4 drab silver bags.\nmuted black bags contain 4 wavy fuchsia bags, 1 striped cyan bag, 4 faded purple bags.\nclear blue bags contain 2 striped teal bags.\nmirrored red bags contain 3 posh plum bags, 2 striped beige bags.\ndull lavender bags contain 2 vibrant purple bags.\nshiny maroon bags contain 4 vibrant chartreuse bags.\ndim fuchsia bags contain 1 striped maroon bag, 3 faded gray bags, 4 vibrant aqua bags.\nfaded plum bags contain 5 posh black bags, 4 striped turquoise bags, 1 striped plum bag.\nplaid cyan bags contain 1 dim turquoise bag, 1 mirrored tan bag, 5 plaid fuchsia bags.\nmuted olive bags contain 5 wavy beige bags, 5 striped tomato bags, 5 posh tan bags, 2 pale magenta bags.\ndark cyan bags contain 5 wavy green bags, 4 muted violet bags.\nvibrant lavender bags contain 1 mirrored orange bag, 4 dull yellow bags, 5 bright silver bags.\ndrab beige bags contain 1 drab yellow bag.\nplaid indigo bags contain 5 clear olive bags, 4 striped teal bags, 4 pale violet bags, 4 shiny gold bags.\ndark fuchsia bags contain 3 drab magenta bags, 1 mirrored orange bag.\nfaded chartreuse bags contain 5 pale blue bags, 3 dim tan bags, 5 dull red bags, 4 wavy maroon bags.\nshiny orange bags contain 3 dark gold bags, 2 posh silver bags, 1 dull cyan bag, 4 drab silver bags.\nstriped black bags contain 5 wavy teal bags, 5 light chartreuse bags, 4 wavy coral bags.\nlight crimson bags contain 2 dim gold bags.\nwavy yellow bags contain 2 dark lime bags, 1 bright fuchsia bag, 2 plaid purple bags, 4 dark bronze bags.\nfaded teal bags contain 3 posh bronze bags, 1 striped yellow bag, 3 dim aqua bags.\nplaid gold bags contain 5 bright black bags, 2 shiny yellow bags, 5 mirrored orange bags, 5 dark lime bags.\nclear beige bags contain 3 faded blue bags, 1 plaid plum bag.\ndull plum bags contain 1 mirrored green bag, 3 mirrored lime bags.\nbright beige bags contain 4 shiny white bags, 5 faded teal bags, 3 mirrored plum bags.\nplaid turquoise bags contain 4 striped gray bags.\ndark beige bags contain 5 plaid brown bags, 4 bright plum bags.\ndull white bags contain 3 posh coral bags.\nvibrant red bags contain 4 plaid red bags.\ndrab indigo bags contain 5 shiny black bags, 3 mirrored brown bags, 4 muted olive bags, 2 mirrored coral bags.\nplaid lime bags contain 4 dim gold bags.\nplaid tan bags contain 2 dark fuchsia bags, 3 dotted purple bags, 5 dull bronze bags, 3 light blue bags.\nmirrored maroon bags contain 4 mirrored green bags, 1 dark tomato bag.\nshiny red bags contain 1 dim salmon bag, 1 plaid plum bag, 4 drab orange bags, 5 shiny teal bags.\ndark lime bags contain 4 shiny white bags, 3 shiny indigo bags, 4 light cyan bags, 2 muted brown bags.\ndull yellow bags contain 3 muted brown bags, 1 light maroon bag.\nmirrored silver bags contain 3 pale brown bags, 5 mirrored yellow bags, 1 pale teal bag, 4 plaid red bags.\nlight teal bags contain 3 posh plum bags.\ndrab tomato bags contain 2 pale coral bags, 5 clear olive bags.\nmirrored lavender bags contain 3 plaid fuchsia bags, 3 muted yellow bags.\ndrab plum bags contain 5 plaid olive bags.\ndotted purple bags contain 2 plaid red bags, 4 mirrored bronze bags, 5 shiny teal bags, 3 dim blue bags.\nvibrant coral bags contain 1 dotted lime bag, 5 shiny salmon bags, 3 mirrored blue bags, 2 striped indigo bags.\nfaded olive bags contain 1 drab blue bag, 4 vibrant indigo bags, 3 dotted lavender bags, 5 muted silver bags.\nwavy white bags contain 3 mirrored maroon bags, 2 dim white bags, 2 dark magenta bags, 4 clear fuchsia bags.\nclear white bags contain 2 light chartreuse bags, 5 plaid fuchsia bags, 2 drab lime bags, 1 clear indigo bag.\npale blue bags contain 2 dim crimson bags, 4 light green bags, 4 vibrant aqua bags, 5 drab white bags.\nmirrored olive bags contain 2 bright gold bags, 4 bright tomato bags.\nvibrant salmon bags contain 5 dim maroon bags, 2 dull cyan bags.\nplaid coral bags contain 1 bright gray bag.\nplaid crimson bags contain 2 muted black bags, 3 drab turquoise bags, 2 mirrored beige bags.\nfaded maroon bags contain 5 drab tan bags, 4 mirrored brown bags, 1 light silver bag.\nvibrant brown bags contain 2 faded salmon bags, 2 posh plum bags, 5 wavy lime bags, 2 shiny beige bags.\ndull gold bags contain 5 shiny salmon bags, 3 drab silver bags, 1 wavy beige bag.\nbright turquoise bags contain 5 wavy blue bags, 4 muted chartreuse bags.\nlight lavender bags contain 1 drab olive bag, 1 posh violet bag.\nposh maroon bags contain 5 bright chartreuse bags, 4 muted black bags, 3 dull tan bags, 2 mirrored gray bags.\nmuted red bags contain 1 striped crimson bag, 5 light blue bags.\ndark violet bags contain 2 muted blue bags, 1 light bronze bag.\nstriped chartreuse bags contain 1 dark violet bag, 1 faded turquoise bag, 3 vibrant tomato bags, 5 dotted teal bags.\ndull turquoise bags contain 3 drab tan bags.\nvibrant olive bags contain 2 drab purple bags.\nshiny yellow bags contain 2 faded lavender bags, 4 shiny cyan bags.\nposh lime bags contain 3 light plum bags, 4 clear magenta bags.\ndotted aqua bags contain 3 dim lime bags, 2 light green bags.\ndim yellow bags contain 4 bright brown bags, 4 wavy coral bags.\nshiny blue bags contain 4 dotted yellow bags, 1 dim crimson bag, 1 clear black bag.\nwavy maroon bags contain 4 vibrant aqua bags, 4 striped bronze bags, 3 dotted silver bags.\ndrab coral bags contain 1 wavy teal bag, 3 plaid orange bags, 2 posh orange bags, 1 mirrored olive bag.\nbright teal bags contain 2 pale magenta bags.\nbright purple bags contain 4 shiny chartreuse bags, 5 plaid lime bags, 2 dim magenta bags.")

(defn- parse-line [line]
  (let [words (s/split line #" ")
        [container-descriptor container-color -bags -contain & more] words]
    (if (= (s/join " " more) "no other bags.")
      [[container-descriptor container-color] nil nil]
      (let [parse-contained (fn [contained]
                              (let [[num descriptor color -bags & more] contained
                                    num (Integer/valueOf num)]
                                [[container-descriptor container-color]
                                 num
                                 [descriptor color]]))
            contained (->> more
                           (partition 4)
                           (map parse-contained))]
        contained))))

(defn- parse-input [input]
  (mapcat parse-line (s/split-lines input)))

(def adjs (parse-input input))

(defn- does-contain [adjs bag]
  (filter (comp (partial = bag) first)
          adjs))

(defn- is-contained-by [adjs bag]
  (filter (comp (partial = bag) last)
          adjs))

(defn- transitive-bag-count [adjs bag]
  (let [bs (does-contain adjs bag)]
    (if (empty? bs)
      1 ;; the bag itself
      (apply +
             1
             (map #(* (second %)
                      (transitive-bag-count adjs (last %)))
                  bs)))))

(defn- transitively-is-contained-by [adjs bags]
  (let [bs (->> bags
                (mapcat (partial is-contained-by adjs))
                (map first)
                (set))]
    (if (empty? bs)
      []
      (into bs (transitively-is-contained-by adjs bs)))))

(def t "light red bags contain 1 bright white bag, 2 muted yellow bags.\ndark orange bags contain 3 bright white bags, 4 muted yellow bags.\nbright white bags contain 1 shiny gold bag.\nmuted yellow bags contain 2 shiny gold bags, 9 faded blue bags.\nshiny gold bags contain 1 dark olive bag, 2 vibrant plum bags.\ndark olive bags contain 3 faded blue bags, 4 dotted black bags.\nvibrant plum bags contain 5 faded blue bags, 6 dotted black bags.\nfaded blue bags contain no other bags.\ndotted black bags contain no other bags.")

;; B
(prn (count (transitively-is-contained-by adjs [["shiny" "gold"]])))

;; B (dec because it asks for the count *inside* the shiny gold
(prn (dec (transitive-bag-count adjs ["shiny" "gold"])))

